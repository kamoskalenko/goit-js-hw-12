{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\n\nasync function getImages(query, page = 1, limit = 15) {\n  const params = new URLSearchParams({\n    key: '',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: limit,\n    page,\n  });\n\n  const response = await axios.get(`${URL}?${params}`);\n  // console.log(response.data);\n  return response.data;\n}\n\nexport { getImages };\n","const gallery = document.querySelector('.gallery');\n\nexport default function renderImageCard(images) {\n  const markup = images.hits\n    .map(\n      image => `\n          <div class=\"image-card\">\n              <a href=\"${image.largeImageURL}\" class=\"link\">\n                  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=640 height=360>\n              </a>\n              <div class=\"info\">\n                  <p><span>Likes</span> ${image.likes}</p>\n                  <p><span>Views</span> ${image.views}</p>\n                  <p><span>Comments</span> ${image.comments}</p>\n                  <p><span>Downloads</span> ${image.downloads}</p>\n              </div>\n          </div>\n      `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  // gallery.innerHTML = markup;\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport * as API from './js/pixabay-api';\nimport renderImageCard from './js/render-functions';\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nconst limit = 15;\nlet page = 1;\nlet totalImgs = 0;\nlet totalPages = 0;\nlet query = '';\n\nfunction onLoader() {\n  loader.classList.add('is-active');\n}\n\nfunction offLoader() {\n  loader.classList.remove('is-active');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction displayLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nhideLoadMoreBtn();\n\nsearchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  onLoader();\n\n  const form = event.currentTarget;\n  query = form.elements.query.value.trim().toLowerCase();\n\n  try {\n    page = 1;\n\n    const data = await API.getImages(query, page, limit);\n    totalImgs = data.totalHits;\n    totalPages = Math.ceil(totalImgs / limit);\n\n    if (query === '' || data.hits.length === 0) {\n      onFetchError();\n      hideLoadMoreBtn();\n      return;\n    }\n\n    renderImageCard(data);\n    lightbox.refresh();\n\n    if (page < totalPages) {\n      displayLoadMoreBtn();\n    } else {\n      hideLoadMoreBtn();\n      showMessage();\n    }\n  } catch (error) {\n    onFetchError();\n  } finally {\n    form.reset();\n    offLoader();\n  }\n}\n\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onLoadMore() {\n  page += 1;\n  onLoader();\n\n  try {\n    const data = await API.getImages(query, page, limit);\n\n    renderImageCard(data);\n    lightbox.refresh();\n\n    scrollGallery();\n\n    if (page >= totalPages) {\n      hideLoadMoreBtn();\n      showMessage();\n    }\n  } catch (error) {\n    onFetchError();\n  } finally {\n    offLoader();\n  }\n}\n\nfunction onFetchError(error) {\n  gallery.innerHTML = '';\n  iziToast.error({\n    maxWidth: 500,\n    timeout: 3000,\n    position: 'topRight',\n    icon: 'material-icons',\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nfunction showMessage() {\n  iziToast.info({\n    maxWidth: 500,\n    timeout: 3000,\n    position: 'bottomCenter',\n    icon: 'material-icons',\n    title: 'Info',\n    message: `We're sorry, but you've reached the end of search results`,\n  });\n}\n\nfunction scrollGallery() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["URL","getImages","query","page","limit","params","axios","gallery","renderImageCard","images","markup","image","searchForm","loadMoreBtn","loader","lightbox","SimpleLightbox","totalImgs","totalPages","onLoader","offLoader","hideLoadMoreBtn","displayLoadMoreBtn","onSearch","event","form","data","API.getImages","onFetchError","showMessage","onLoadMore","scrollGallery","error","iziToast","cardHeight"],"mappings":"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"}